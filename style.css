/* style.css — Author: Christer Grimsæth */

:root {
    --accent: #e8a83e;
    --finance: #4ade80;
    --src-nrk: #5b9fd4;
    --src-nrk-sport: #22d3ee;
    --src-e24: #4ade80;
    --src-aftenbladet: #fb923c;
    --src-vg: #f87171;
    --src-vg-sport: #f472b6;
    --src-dn: #a78bfa;
    --bg-deep: #08090c;
    --bg-panel: #0f1115;
    --bg-card: #161920;
    --border: rgba(255, 255, 255, 0.06);
    --border-accent: rgba(232, 168, 62, 0.2);
    --text-primary: #f0ece4;
    --text-secondary: #8a8d96;
    --text-dim: #4e515a;
    --font-display: 'Sora', system-ui, sans-serif;
    --font-body: 'DM Sans', system-ui, sans-serif;
    --radius: 14px;
    --radius-sm: 10px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
    height: 100%; overflow: hidden;
    background: var(--bg-deep);
    color: var(--text-primary);
    font-family: var(--font-body);
    -webkit-font-smoothing: antialiased;
}
body.hide-cursor { cursor: none; }

/* ═══ LAYOUT ═══ */
.screen {
    display: grid;
    grid-template-columns: 1fr 440px;
    grid-template-rows: 1fr 100px;
    grid-template-areas:
        "left-col widgets"
        "ticker widgets";
    height: 100vh; width: 100vw;
}

.left-col {
    grid-area: left-col;
    display: flex; flex-direction: column; overflow: hidden;
}

/* ═══ HERO ═══ */
.hero-story {
    position: relative; height: 380px; min-height: 380px;
    overflow: hidden; border-bottom: 1px solid var(--border);
}

.hero-card {
    position: absolute; inset: 0;
    display: grid; grid-template-columns: 460px 1fr;
    gap: 32px; padding: 28px 36px;
    opacity: 0; transition: opacity 1s ease;
}
.hero-card.active { opacity: 1; }

.hero-img-wrap {
    position: relative; border-radius: var(--radius);
    overflow: hidden; background: var(--bg-card);
}
.hero-img-wrap img {
    width: 100%; height: 100%; object-fit: cover; display: block;
    animation: hero-kb 30s ease-in-out infinite alternate;
}
@keyframes hero-kb {
    0%   { transform: scale(1) translate(0, 0); }
    100% { transform: scale(1.08) translate(-1%, -0.5%); }
}
.hero-img-wrap .hero-no-img {
    width: 100%; height: 100%;
    display: flex; align-items: center; justify-content: center;
    font-size: 5rem; opacity: 0.1; animation: none;
}

.hero-badge {
    position: absolute; top: 14px; left: 14px;
    font-family: var(--font-display);
    font-size: 0.8rem; font-weight: 700;
    letter-spacing: 2px; text-transform: uppercase;
    padding: 6px 14px; border-radius: 6px; z-index: 2;
}
.hero-badge.src-nrk { background: var(--src-nrk); color: var(--bg-deep); }
.hero-badge.src-nrk-sport { background: var(--src-nrk-sport); color: var(--bg-deep); }
.hero-badge.src-e24 { background: var(--src-e24); color: var(--bg-deep); }
.hero-badge.src-aftenbladet { background: var(--src-aftenbladet); color: var(--bg-deep); }
.hero-badge.src-vg { background: var(--src-vg); color: var(--bg-deep); }
.hero-badge.src-vg-sport { background: var(--src-vg-sport); color: var(--bg-deep); }
.hero-badge.src-dn { background: var(--src-dn); color: var(--bg-deep); }

.hero-text {
    display: flex; flex-direction: column;
    justify-content: center; gap: 12px; min-width: 0;
}
.hero-source {
    font-family: var(--font-display); font-size: 0.9rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 2px; color: var(--accent);
}
.hero-source.src-nrk { color: var(--src-nrk); }
.hero-source.src-nrk-sport { color: var(--src-nrk-sport); }
.hero-source.src-e24 { color: var(--src-e24); }
.hero-source.src-aftenbladet { color: var(--src-aftenbladet); }
.hero-source.src-vg { color: var(--src-vg); }
.hero-source.src-vg-sport { color: var(--src-vg-sport); }
.hero-source.src-dn { color: var(--src-dn); }
.hero-top-badge {
    font-size: 0.65rem; font-weight: 700; letter-spacing: 1px;
    margin-left: 10px; padding: 2px 8px; border-radius: 3px;
    border: 1px solid currentColor;
    display: inline-block; vertical-align: middle;
}

.hero-title {
    font-family: var(--font-display); font-size: 2.5rem; font-weight: 700;
    line-height: 1.2; color: var(--text-primary);
    display: -webkit-box; -webkit-line-clamp: 3;
    -webkit-box-orient: vertical; overflow: hidden;
}
.hero-desc {
    font-size: 1.35rem; line-height: 1.5; color: var(--text-secondary);
    overflow: hidden;
}
.hero-time { font-size: 1rem; color: var(--text-dim); margin-top: auto; }

.hero-divider {
    position: absolute; bottom: 0; left: 36px; right: 36px; height: 1px;
    background: linear-gradient(to right, var(--border-accent), var(--border), transparent);
}
.hero-progress {
    position: absolute; bottom: 10px; left: 28px; right: 28px;
    display: flex; gap: 4px; z-index: 6;
}
.hero-prog-seg {
    flex: 1; height: 3px; border-radius: 2px;
    background: rgba(255,255,255,0.12); overflow: hidden;
}
.hero-prog-fill {
    height: 100%; width: 0%; border-radius: 2px;
    background: var(--accent);
}
.hero-prog-seg.done .hero-prog-fill { width: 100%; }
.hero-prog-seg.active .hero-prog-fill {
    animation: hero-prog-fill linear forwards;
}
@keyframes hero-prog-fill { from { width: 0%; } to { width: 100%; } }

/* ═══ FEED ═══ */
.feed {
    flex: 1; overflow: hidden; position: relative;
}
.feed-fade-bottom {
    position: absolute; left: 0; right: 0; bottom: 0; height: 60px;
    background: linear-gradient(to top, var(--bg-deep), transparent);
    z-index: 5; pointer-events: none;
}

.article {
    display: grid; grid-template-columns: 260px 1fr;
    gap: 18px; padding: 16px 32px;
    border-bottom: 1px solid var(--border);
}

.article-text {
    display: flex; flex-direction: column;
    justify-content: center; gap: 5px; min-width: 0;
}
.article-source {
    font-family: var(--font-display); font-size: 0.75rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 1.5px; color: var(--accent);
}
.article-source.src-nrk { color: var(--src-nrk); }
.article-source.src-nrk-sport { color: var(--src-nrk-sport); }
.article-source.src-e24 { color: var(--src-e24); }
.article-source.src-aftenbladet { color: var(--src-aftenbladet); }
.article-source.src-vg { color: var(--src-vg); }
.article-source.src-vg-sport { color: var(--src-vg-sport); }
.article-source.src-dn { color: var(--src-dn); }

.article-title {
    font-family: var(--font-display); font-size: 1.35rem; font-weight: 600;
    line-height: 1.3; color: var(--text-primary);
    display: -webkit-box; -webkit-line-clamp: 2;
    -webkit-box-orient: vertical; overflow: hidden;
}
.article-desc {
    font-size: 1.05rem; line-height: 1.4; color: var(--text-secondary);
    display: -webkit-box; -webkit-line-clamp: 2;
    -webkit-box-orient: vertical; overflow: hidden;
}
.article-time { font-size: 0.85rem; color: var(--text-dim); }
.meta-sep { opacity: 1; margin: 0 6px; font-size: 1.2em; font-weight: 700; }
.article-latest { border-left: 3px solid var(--accent); }
.article-latest.src-nrk { border-left-color: var(--src-nrk); }
.article-latest.src-nrk-sport { border-left-color: var(--src-nrk-sport); }
.article-latest.src-e24 { border-left-color: var(--src-e24); }
.article-latest.src-aftenbladet { border-left-color: var(--src-aftenbladet); }
.article-latest.src-vg { border-left-color: var(--src-vg); }
.article-latest.src-vg-sport { border-left-color: var(--src-vg-sport); }
.article-latest.src-dn { border-left-color: var(--src-dn); }
.article-ny {
    font-size: 0.6rem; font-weight: 700; letter-spacing: 1px;
    margin-left: 8px; padding: 2px 6px; border-radius: 3px;
    border: 1px solid currentColor;
    display: inline-block; vertical-align: middle;
}

.article-img {
    width: 260px; height: 146px; border-radius: var(--radius-sm);
    overflow: hidden; background: var(--bg-card);
}
.article-img img { width: 100%; height: 100%; object-fit: cover; display: block; }
.article-img.no-image {
    display: flex; align-items: center; justify-content: center;
    font-size: 2.5rem; opacity: 0.12;
}

/* ═══ WIDGETS ═══ */
.widgets {
    grid-area: widgets; background: var(--bg-panel);
    border-left: 1px solid var(--border);
    display: flex; flex-direction: column;
    padding: 10px 18px 6px; gap: 6px;
    overflow: hidden; position: relative;
}
.widgets::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 160px;
    background: linear-gradient(135deg, rgba(232,168,62,0.04) 0%, transparent 60%);
    pointer-events: none;
}

.widget-card {
    background: var(--bg-card); border: 1px solid var(--border);
    border-radius: var(--radius-sm); padding: 12px 16px; position: relative;
}
.widget-label {
    font-family: var(--font-display); font-size: 0.8rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 2px;
    color: var(--accent); margin-bottom: 6px;
    display: flex; align-items: center; gap: 8px;
}
.widget-label-line {
    flex: 1; height: 1px;
    background: linear-gradient(to right, var(--border-accent), transparent);
}

/* Clock */
.clock-row {
    display: flex; align-items: flex-end; justify-content: space-between;
}
.clock-time {
    font-family: var(--font-display); font-size: 3.4rem; font-weight: 700;
    letter-spacing: -2px; line-height: 1; color: var(--accent);
}
.clock-colon { opacity: 0.3; }
.clock-seconds {
    font-size: 1.3rem; font-weight: 300; opacity: 0.3;
    margin-left: 2px; vertical-align: super;
}
.clock-date-row {
    display: flex; align-items: baseline; justify-content: space-between;
    margin-top: 4px;
}
.clock-date {
    font-family: var(--font-display); font-size: 1rem;
    color: var(--text-secondary); text-transform: capitalize;
}
.brand-name {
    font-family: var(--font-display); font-size: 0.55rem; font-weight: 600;
    letter-spacing: 1.5px;
    color: var(--text-secondary); opacity: 0.6;
}

/* Refresh indicator — EC logo */
.ec-refresh-wrap {
    position: relative; width: 52px; height: 52px;
}
.ec-logo-bg, .ec-logo-fill {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
}
.ec-logo-bg {
    opacity: 0.12; filter: grayscale(1) brightness(2);
}
.ec-logo-fill {
    --progress: 0deg;
    -webkit-mask-image: conic-gradient(from -90deg, #000 var(--progress), transparent var(--progress));
    mask-image: conic-gradient(from -90deg, #000 var(--progress), transparent var(--progress));
}
.ec-logo-fill.ec-loading {
    animation: ec-pulse 1s ease-in-out infinite;
}
.ec-logo-fill.ec-soon {
    animation: ec-glow 1.5s ease-in-out infinite;
}
@keyframes ec-pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.3; transform: scale(0.92); } }
@keyframes ec-glow {
    0%, 100% { filter: drop-shadow(0 0 4px rgba(142, 178, 69, 0.4)); transform: scale(1); }
    50% { filter: drop-shadow(0 0 18px rgba(142, 178, 69, 1)) drop-shadow(0 0 40px rgba(142, 178, 69, 0.5)); transform: scale(1.08); }
}
.refresh-label {
    font-family: var(--font-display); font-size: 0.7rem;
    color: var(--text-secondary); letter-spacing: 0.5px;
    white-space: nowrap; text-align: right;
    margin-top: 4px;
}

/* Weather */
.weather-row { display: flex; align-items: center; gap: 12px; }
.weather-icon { font-size: 2.6rem; line-height: 1; }
.weather-temp { font-family: var(--font-display); font-size: 2.2rem; font-weight: 700; line-height: 1; }
.weather-desc { font-size: 1.05rem; color: var(--text-secondary); }
.weather-detail { font-size: 1rem; color: var(--text-secondary); }
.weather-location { font-size: 0.9rem; color: var(--text-secondary); margin-top: 1px; }


/* Daily Image */
.daily-img-widget {
    position: relative; overflow: hidden; border-radius: var(--radius-sm);
    aspect-ratio: 16 / 9; background: var(--bg-deep);
}
.di-slide {
    position: absolute; inset: 0; opacity: 0; transition: opacity 1.5s ease;
}
.di-slide.active { opacity: 1; }
.di-slide img { width: 100%; height: 100%; object-fit: cover; display: block; }
.di-slide.kb-a img { animation: kb-a 18s ease-in-out forwards; }
.di-slide.kb-b img { animation: kb-b 18s ease-in-out forwards; }
@keyframes kb-a { 0% { transform: scale(1); } 100% { transform: scale(1.12) translate(-1.5%, -1%); } }
@keyframes kb-b { 0% { transform: scale(1.1) translate(-1%, 1%); } 100% { transform: scale(1) translate(1%, -0.5%); } }

.di-caption {
    position: absolute; bottom: 0; left: 0; right: 0;
    padding: 20px 12px 8px;
    background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
    font-family: var(--font-display); font-size: 0.8rem;
    color: rgba(255,255,255,0.7); letter-spacing: 0.5px; z-index: 2;
}
.di-dots {
    position: absolute; bottom: 7px; right: 10px;
    display: flex; gap: 4px; z-index: 3;
}
.di-dot {
    width: 5px; height: 5px; border-radius: 50%;
    background: rgba(255,255,255,0.25); transition: all 0.4s ease;
}
.di-dot.active { background: var(--accent); width: 14px; border-radius: 3px; }

/* Events */
.events-list { display: flex; flex-direction: column; gap: 5px; }
.event-item {
    display: flex; align-items: center; gap: 10px;
    padding: 4px 0; border-bottom: 1px solid var(--border);
}
.event-item:last-child { border-bottom: none; }
.event-icon {
    width: 34px; height: 34px; min-width: 34px; border-radius: 6px;
    overflow: hidden; background: var(--bg-deep);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.2rem; line-height: 1;
}
.event-icon img { width: 100%; height: 100%; object-fit: cover; display: block; }
.event-info { flex: 1; min-width: 0; }
.event-title {
    font-family: var(--font-display); font-size: 0.9rem; font-weight: 600;
    line-height: 1.3; color: var(--text-primary);
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.event-bottom {
    display: flex; align-items: center; justify-content: space-between; gap: 8px;
}
.event-meta { font-size: 0.75rem; color: var(--text-dim); }
.event-date {
    font-family: var(--font-display); font-size: 0.7rem; font-weight: 600;
    color: var(--accent); white-space: nowrap;
}

/* Bus Departures */
.bus-stop-name {
    font-size: 0.75rem; color: var(--text-dim);
    font-family: var(--font-display); margin-bottom: 4px;
}
.bus-stop-name::before { content: '\1F68F  '; }
.bus-list { display: flex; flex-direction: column; gap: 4px; }
.bus-item {
    display: flex; align-items: center; gap: 10px;
    padding: 5px 0; border-bottom: 1px solid var(--border);
}
.bus-item:last-child { border-bottom: none; }
.bus-line {
    font-family: var(--font-display); font-size: 0.85rem; font-weight: 700;
    background: var(--accent); color: var(--bg-deep);
    padding: 3px 8px; border-radius: 5px; min-width: 42px;
    text-align: center; white-space: nowrap;
}
.bus-dest {
    flex: 1; min-width: 0;
    font-family: var(--font-display); font-size: 0.9rem; font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.bus-time {
    font-family: var(--font-display); font-size: 0.95rem; font-weight: 700;
    color: var(--text-primary); white-space: nowrap;
}
.bus-time .bus-rt {
    display: inline-block; width: 6px; height: 6px; border-radius: 50%;
    background: #4ade80; margin-right: 3px; vertical-align: middle;
}


/* Source Status */
.source-status {
    margin-top: auto; padding-top: 6px;
    border-top: 1px solid var(--border);
    display: flex; flex-wrap: wrap; gap: 4px 8px; justify-content: flex-end;
}
.source-dot {
    display: flex; align-items: center; gap: 4px;
    font-size: 0.7rem; color: var(--text-dim);
    font-family: var(--font-display); letter-spacing: 0.3px;
}
.source-dot .dot {
    width: 6px; height: 6px; border-radius: 50%;
    background: var(--text-dim); transition: background 0.4s ease;
}
.source-dot .dot.ok { background: #4ade80; }
.source-dot .dot.error { background: #f87171; }
.source-dot .dot.soon {
    background: var(--accent);
    animation: glow-dot 1.5s ease-in-out infinite;
}
@keyframes glow-dot {
    0%, 100% { box-shadow: 0 0 2px 1px rgba(232, 168, 62, 0.2); }
    50% { box-shadow: 0 0 10px 5px rgba(232, 168, 62, 0.8); }
}
.source-dot .dot.loading {
    background: var(--accent);
    animation: pulse-dot 1s ease-in-out infinite;
}
@keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

/* ═══ TICKER ═══ */
.ticker-bar {
    grid-area: ticker; background: var(--bg-panel);
    border-top: 1px solid var(--border);
    display: flex; align-items: center; overflow: hidden;
}
.ticker-label {
    display: flex; align-items: center; gap: 8px;
    padding: 0 24px 0 28px;
    font-family: var(--font-display); font-size: 1.05rem; font-weight: 700;
    letter-spacing: 3px; text-transform: uppercase;
    color: var(--bg-deep); background: var(--accent);
    height: 100%; white-space: nowrap; position: relative; z-index: 2;
}
.ticker-label::after {
    content: ''; position: absolute;
    right: -24px; top: 0; bottom: 0; width: 24px;
    background: linear-gradient(to right, rgba(232,168,62,0.4), transparent);
}
.ticker-live-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--bg-deep); animation: pulse-dot 1.5s ease-in-out infinite;
}

.ticker-track {
    flex: 1; overflow: hidden; height: 100%;
    display: flex; align-items: center;
}
@keyframes ticker-scroll {
    from { transform: translate3d(0, 0, 0); }
    to { transform: translate3d(-50%, 0, 0); }
}
.ticker-content {
    display: flex; white-space: nowrap;
    font-size: 1.5rem; color: var(--text-primary);
    will-change: transform;
}
.ticker-content > span { padding: 0 24px; }
.ticker-content .fin-item span { padding: 0; }
.ticker-content .sep {
    color: var(--accent); font-size: 1.2rem; padding: 0 16px; opacity: 0.4;
    display: inline-flex; align-items: center;
}
.ticker-content .fin-item {
    color: var(--finance); display: inline-flex; flex-direction: row;
    align-items: flex-end; padding: 0 8px; line-height: 1; gap: 4px;
}
.ticker-content .fin-val {
    font-family: var(--font-display); font-weight: 700;
    font-size: 1.8rem;
}
.ticker-content .fin-meta {
    display: flex; flex-direction: column; align-items: flex-start;
    gap: 1px; margin-bottom: 3px;
}
.ticker-content .fin-cur {
    font-family: var(--font-display); font-weight: 600;
    font-size: 0.55rem; opacity: 0.6; letter-spacing: 1px;
}
.ticker-content .fin-chg {
    font-size: 0.65rem; font-weight: 600; order: -1;
}
.ticker-content .fin-chg.up { color: #4ade80; }
.ticker-content .fin-chg.down { color: #f87171; }
/* ═══ LOADING & AMBIENT ═══ */
.loading-overlay {
    position: fixed; inset: 0; background: var(--bg-deep); z-index: 100;
    display: flex; align-items: center; justify-content: center;
    flex-direction: column; gap: 16px;
    transition: opacity 0.8s ease, visibility 0.8s ease;
}
.loading-overlay.hidden { opacity: 0; visibility: hidden; }
.loading-spinner {
    width: 36px; height: 36px; border: 2px solid var(--border);
    border-top-color: var(--accent); border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text {
    font-family: var(--font-display); font-size: 1rem;
    letter-spacing: 3px; text-transform: uppercase; color: var(--text-dim);
}

.ambient-orb {
    position: fixed; border-radius: 50%;
    filter: blur(120px); pointer-events: none; z-index: 0;
}
.orb-1 {
    width: 400px; height: 400px; background: var(--accent);
    top: -100px; right: 200px; opacity: 0.05;
    animation: float-orb 20s ease-in-out infinite;
}
.orb-2 {
    width: 300px; height: 300px; background: #3a6bdb;
    bottom: -50px; left: 25%; opacity: 0.03;
    animation: float-orb 25s ease-in-out infinite reverse;
}
@keyframes float-orb {
    0%, 100% { transform: translate(0, 0); }
    33% { transform: translate(30px, -20px); }
    66% { transform: translate(-20px, 15px); }
}
